{% load i18n %}
{% load humanize %}
{% with last_donation=recurrence.last_donation %}
    <div class="border border-2 border-callout p-3 tight-margin vstack gap-2">
        {% include "fds_donation/includes/payment_amount.html" with amount=recurrence.amount recurrence=recurrence.get_interval_display %}
        {% include "fds_donation/includes/payment_method.html" with donation=last_donation %}
        {% if recurrence.is_banktransfer %}
            <p>{% translate "You can adjust your donation by changing your standing order." %}</p>
            {% with order=recurrence.last_donation.order %}
                {% if order %}
                    {% include "fds_donation/includes/banktransfer_modal.html" with order=order %}
                {% endif %}
            {% endwith %}
        {% elif recurrence.subscription %}
            <ul class="list-unstyled">
                <li>
                    <a class="action-link arrow"
                       href="{{ recurrence.subscription.get_absolute_url }}">{% translate "Adjust amount or interval" %}</a>
                </li>
                <li>
                    <a class="action-link arrow"
                       href="{{ recurrence.subscription.get_absolute_url }}">{% translate "Pause or cancel your subscription" %}</a>
                </li>
            </ul>
        {% elif recurrence.is_paypal %}
            <p>{% translate "You can change or cancel your PayPal subscription in your PayPal account." %}</p>
            <a href="https://www.paypal.com/billing/subscriptions"
               target="_blank"
               class="action-link arrow">{% translate "Manage your PayPal subscriptions" %}</a>
        {% endif %}
    </div>
{% endwith %}
