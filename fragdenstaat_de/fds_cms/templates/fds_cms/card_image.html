{% load thumbnail %}
{% load markup %}

<div class="box-card-image overlap-{{ instance.overlap }}{% if instance.overlap == 'left' %} col-md-4 col-lg-3{% endif %}">
  {% with picture=instance.image %}
  <picture>
    <source
      media="(min-width: 992px)"
      srcset="{% thumbnail picture 640x0 crop=smart subject_location=picture.subject_location %}">
    <source
      media="(min-width: 768px)"
      srcset="{% thumbnail picture 480x0 crop=smart subject_location=picture.subject_location %}">
    <img class="w-100 h-auto z-index-10" loading="lazy" width="320" height="185" src="{% spaceless %}
        {% thumbnail picture 320x0 crop=smart subject_location=picture.subject_location %}
        {% endspaceless %}"
        {% if picture.default_alt_text and not attributes.alt %} alt="{{ picture.default_alt_text }}"{% endif %}
        {{ attributes_str }}>
  </picture>
  {% endwith %}
</div>